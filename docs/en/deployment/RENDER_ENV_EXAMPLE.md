# Render Environment Variable Examples (Backend)

This file shows example environment variable settings for deploying backend on Render.

## ğŸ“‹ Required variables

Set these variables in Render dashboard.

---

## ğŸ”§ How to configure

1. Open `payloadexchange-backend` service in Render dashboard
2. Click **Environment** from left menu
3. Click **Add Environment Variable**
4. Add variables below one by one

---

## ğŸ“ Variable details

### 1. DATABASE_URL (required)

**Key:** `DATABASE_URL`

**Value:** PostgreSQL Internal Database URL

**How to get:**
1. Open PostgreSQL database in Render dashboard
2. Click **Connections** tab
3. Copy **Internal Database URL**

**Example:**
```text
postgres://payloadexchange_user:your_password@dpg-xxxxxxxxxxxx-a.oregon-postgres.render.com/payloadexchange
```

**Important:**
- Use **Internal Database URL** (not External URL)
- Replace password with actual value

---

### 2. PUBLIC_BASE_URL (required)

**Key:** `PUBLIC_BASE_URL`

**Value:** Backend URL generated by Render

**How to get:**
1. After web service is deployed, copy URL shown on service page
2. Use the full URL as-is

**Example (temporary):**
```text
https://payloadexchange-backend.onrender.com
```

**Example (actual after deploy):**
```text
https://payloadexchange-backend-xxxx.onrender.com
```

**Important:**
- Update to the actual URL after deploy completes
- Include protocol (`https://`)
- No trailing slash

---

### 3. RUST_LOG (recommended)

**Key:** `RUST_LOG`

**Value:** log level

**Example:**
```text
info
```

**Options:**
- `error`: errors only
- `warn`: warnings + errors
- `info`: info + warnings + errors (recommended)
- `debug`: detailed debug logs
- `trace`: most verbose

---

### 4. PORT (usually not needed)

**Key:** `PORT`

**Value:** not required in most cases

**Notes:**
- Render automatically injects `PORT`
- Your app can read it via `std::env::var("PORT")`

---

## ğŸ“‹ Dashboard example

```text
Environment Variables
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Key                 â”‚ Value                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DATABASE_URL        â”‚ postgres://user:pass@host:5432/dbname        â”‚
â”‚ PUBLIC_BASE_URL     â”‚ https://payloadexchange-backend.onrender.com â”‚
â”‚ RUST_LOG            â”‚ info                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ After setting variables

1. Click **Save Changes**
2. Render starts automatic redeploy
3. Wait for deploy completion (5-10 minutes)
4. Verify `/health` endpoint

---

## âœ… Health check

Open:

```text
https://your-backend-url.onrender.com/health
```

Expected response:

```json
{"message":"ok"}
```

---

## ğŸ†˜ Troubleshooting

### Error: `Postgres not configured; set DATABASE_URL`

**Cause:** `DATABASE_URL` is missing or invalid

**Fix:**
1. Confirm `DATABASE_URL` is set
2. Confirm it uses Internal URL (not External)
3. Confirm there are no extra spaces/newlines

### Error: deployment fails

**Cause:** env-var configuration error or build error

**Fix:**
1. Check Render logs (`Logs` tab)
2. Validate env-var values
3. Confirm `PUBLIC_BASE_URL` uses actual service URL

---

## ğŸ“ Checklist

- [ ] PostgreSQL database created
- [ ] Internal Database URL copied
- [ ] Web service deployed and URL confirmed
- [ ] All variables configured correctly
- [ ] Clicked `Save Changes`
- [ ] Redeploy completed
- [ ] `/health` endpoint verified

---

## ğŸ”— Related docs

- Detailed backend deployment: `BACKEND_DEPLOY.md`
- Quick start: `RENDER_QUICK_START.md`
- Deployment checks: `RENDER_DEPLOY_CHECK.md`
